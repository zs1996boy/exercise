(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-55a4e8c6"],{"09b9":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"info-item",staticStyle:{flex:"1","margin-left":"0","margin-top":"30px"}},[i("span",{staticClass:"btn-orange"},[i("van-uploader",{attrs:{multiple:!1,"after-read":t.afterRead,"preview-image":!1,"max-count":1,"show-upload":!0,accept:"image/*"}},[i("van-button",{attrs:{icon:"plus",type:"primary"}},[t._v("上传文件")])],1)],1),i("input",{staticClass:"oper",staticStyle:{margin:"3px 5px"},attrs:{type:"button",value:"+",title:"放大"},on:{click:function(e){return t.changeScale(1)}}}),i("input",{staticClass:"oper",staticStyle:{margin:"3px 5px"},attrs:{type:"button",value:"-",title:"缩小"},on:{click:function(e){return t.changeScale(-1)}}}),i("input",{staticClass:"oper",staticStyle:{margin:"3px 5px"},attrs:{type:"button",value:"↺",title:"左旋转"},on:{click:t.rotateLeft}}),i("input",{staticClass:"oper",staticStyle:{margin:"3px 5px"},attrs:{type:"button",value:"↻",title:"右旋转"},on:{click:t.rotateRight}}),i("input",{staticClass:"oper",staticStyle:{margin:"3px 5px"},attrs:{type:"button",value:"↓",title:"下载"},on:{click:function(e){return t.down("blob")}}}),i("input",{staticClass:"btn btn-blue",attrs:{type:"button",value:"上传头像"},on:{click:function(e){return t.finish("blob")}}}),i("div",{staticClass:"line",staticStyle:{"margin-top":"20px"}},[i("div",{staticClass:"cropper-content"},[i("div",{staticClass:"cropper"},[i("vueCropper",{ref:"cropper",staticClass:"cropperImg",attrs:{img:t.option.img,outputSize:t.option.size,outputType:t.option.outputType,info:!1,centerBox:!0,full:t.option.full,canMove:t.option.canMove,canMoveBox:t.option.canMoveBox,original:t.option.original,autoCrop:t.option.autoCrop,autoCropWidth:t.option.autoCropWidth,autoCropHeight:t.option.autoCropHeight,fixedBox:t.option.fixedBox},on:{realTime:t.realTime,imgLoad:t.imgLoad}})],1)])])])])},o=[],r=i("7e79"),n={data(){return{tempArr:[],headImg:"",crap:!1,previews:{},option:{img:"",outputSize:1,full:!1,outputType:"png",canMove:!0,original:!1,canMoveBox:!0,autoCrop:!0,autoCropWidth:150,autoCropHeight:150,fixedBox:!0},fileName:"",downImg:"#",imgFile:"",maxSize:10485760,type:""}},components:{vueCropper:r["VueCropper"]},methods:{afterRead(t){0===this.tempArr.length&&(this.type=""),this.$toast.loading();let e=null;-1!==t.file.type.indexOf("image")&&(e="image"),e?(this.option.img=URL.createObjectURL(t.file),this.option.img=t.content,this.fileName=t.file.name):this.$toast.fail("请上传图片")},changeScale(t){t=t||1,this.$refs.cropper.changeScale(t)},rotateLeft(){this.$refs.cropper.rotateLeft()},rotateRight(){this.$refs.cropper.rotateRight()},finish(){if(!this.fileName)return void this.$toast({message:"暂无选择文件"});let t=new FormData;this.$refs.cropper.getCropBlob(e=>{let i=window.URL.createObjectURL(e);console.log(i),t.append("file",e,this.fileName),this.$api.image(t).then(t=>{let e=this.$resData(t);e?this.$api.modHeadPortrait({headPortrait:e}).then(t=>{200===t.status?this.$toast({message:"修改头像成功"}):this.$toast({message:"修改头像失败"})}):this.$toast({message:"网络请求失败"})})})},realTime(t){this.previews=t},down(t){let e=this.$util.isWxBrowser();alert(e);let i=document.createElement("a");i.download="author-img","blob"===t?this.$refs.cropper.getCropBlob(t=>{this.downImg=window.URL.createObjectURL(t),i.href=window.URL.createObjectURL(t),i.click()}):this.$refs.cropper.getCropData(t=>{this.downImg=t,i.href=t,i.click()})},uploadImg(t,e){let i=this,a=t.target.files[0];if(i.fileName=a.name,!/\.(gif|jpg|jpeg|png|bmp|GIF|JPG|PNG)$/.test(t.target.value))return alert("图片类型必须是.gif,jpeg,jpg,png,bmp中的一种"),!1;if(a.size>i.maxSize)return void alert("图片不能超过10M");let o=new FileReader;o.onload=t=>{let a;a="object"===typeof t.target.result?window.URL.createObjectURL(new Blob([t.target.result])):t.target.result,1===e?i.option.img=a:2===e&&(i.example2.img=a)},o.readAsArrayBuffer(a)},imgLoad(t){console.log("msg"+t)}}},s=n,p=(i("764d"),i("2877")),l=Object(p["a"])(s,a,o,!1,null,null,null);e["default"]=l.exports},3818:function(t,e,i){},"764d":function(t,e,i){"use strict";var a=i("3818"),o=i.n(a);o.a}}]);