(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e19f6946"],{5710:function(e,t,i){e.exports=i.p+"img/code1.png"},"6fad":function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"p2"}},[i("div",{staticClass:"p2_top"},[i("br"),i("br"),i("p",[e._v("请在虚线画板里签名")]),i("vue-esign",{ref:"esign",staticClass:"p2_esign",attrs:{width:500,height:300,isCrop:e.isCrop,lineWidth:e.lineWidth,lineColor:e.lineColor,bgColor:e.bgColor},on:{"update:bgColor":function(t){e.bgColor=t},"update:bg-color":function(t){e.bgColor=t}}}),i("br"),i("br"),i("p",[e._v("生成图片")]),i("div",{staticStyle:{border:"solid 2px red"},on:{click:function(t){return e.getImg()}}},[i("img",{attrs:{src:e.resultImg}})]),i("br"),i("br"),i("br"),i("p",[e._v("选择图框")]),i("div",{staticClass:"p2_img"},e._l(e.img,(function(t,s){return i("div",{key:s,on:{click:function(i){return e.img_index(t)}}},[i("img",{attrs:{src:t,alt:""}})])})),0),i("button",{on:{click:e.handleReset}},[e._v("清空画板")]),i("button",{on:{click:e.handleGenerate}},[e._v("生成图片")]),i("button",{on:{click:e.drawProdPicture}},[e._v("合成图片")]),i("div",{on:{click:function(t){return e.getImg1()}}},[i("img",{attrs:{src:e.makePic}})])],1),this.$store.state.off_code?i("div",{staticClass:"end_text"},e._l(e.text,(function(t,s){return i("div",{key:s},[e._v(" "+e._s(t)+" ")])})),0):e._e(),i("div",{staticClass:"bottom",attrs:{"is-link":""},on:{click:e.showPopup}},[e._v("使用方法")]),i("van-popup",{style:{height:"50%"},attrs:{closeable:"",round:"",position:"bottom"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[i("ul",{staticClass:"text_bottom"},[i("li",[e._v("第一步 "),i("ol",[e._v("npm install vue-esign --save")])]),i("li",[e._v(" 第二步 "),i("ol",[e._v(" import vueEsign from 'vue-esign'; ")]),i("ol",[e._v(" Vue.use(vueEsign); ")])]),i("li",{on:{click:function(t){return e.getImg2(e.codeimg)}}},[e._v(" 代码如下： "),i("img",{staticClass:"longbtn",attrs:{src:e.codeimg,alt:""}})])])])],1)},o=[],n=i("d9d7"),r=i.n(n),g=i("ae74"),l=i.n(g),a=i("5710"),m=i.n(a),c=i("28a2"),d={data(){return{codeimg:m.a,lineWidth:6,lineColor:"#000000",bgColor:"",resultImg:"",isCrop:!1,bgPic:"",img:[r.a,l.a,l.a,l.a,r.a],makePic:"",show:!1,text:["<template>",'  <div id="p2">','    <div class="p2_top">',"      <br />","      <br />","      <p>请在虚线画板里签名</p>","      <vue-esign",'        class="p2_esign"','        ref="esign"','        :width="500"','        :height="300"','        :isCrop="isCrop"','        :lineWidth="lineWidth"','        :lineColor="lineColor"','        :bgColor.sync="bgColor"',"      />","      <br />","      <br />","      <p>生成图片</p>",'      <div style="border: solid 2px red" @click="getImg()">','        <img :src="resultImg" />',"      </div>","      <br />","      <br />","      <br />","      <p>选择图框</p>",'      <div class="p2_img">','        <div v-for="(item,index) in img" :key="index" @click="img_index(item)">','          <img :src="item" alt="" />',"        </div>","      </div>",'      <button @click="handleReset">清空画板</button>','      <button @click="handleGenerate">生成图片</button>','      <button @click="drawProdPicture">合成图片</button>','      <div @click="getImg1()">','        <img :src="makePic" />',"      </div>","    </div>",'    <div class="bottom" is-link @click="showPopup">使用方法</div>',"    <van-popup",'      v-model="show"',"      closeable","      round",'      position="bottom"',"      :style=\"{ height: '50%' }\"","    >",'      <ul class="text_bottom">',"        <li>第一步","          <ol>npm install vue-esign --save</ol>","        </li>","        <li>","          第二步","          <ol>","            import vueEsign from 'vue-esign';","          </ol>","          <ol>","            Vue.use(vueEsign);","          </ol>","        </li>",'        <li @click="getImg2(codeimg)">',"          代码如下：",'          <img :src="codeimg" alt="" class="longbtn">',"        </li>","      </ul>","    </van-popup>","  </div>","</template>","<>","/**"," * npm install vue-esign --save"," *"," * https://github.com/JaimeCheng/vue-esign"," */","//这里就是我猫咪照片的地址","//   import vueEsign from 'vue-esign';","//   Vue.use(vueEsign)",'import bgPic from "@/assets/img/bk.png";','import bgPic1 from "@/assets/img/fk.png";','import codeimg from "@/assets/img/code1.png";','import { ImagePreview } from "vant"; //引入预览',"export default {","  data() {","    return {","      codeimg,","      lineWidth: 6,",'      lineColor: "#000000",','      bgColor: "",',"      //签名图",'      resultImg: "",',"      isCrop: false,","      //底图",'      bgPic: "",',"      img: [bgPic, bgPic1, bgPic1, bgPic1, bgPic],",'      makePic: "",',"      show: false,","    };","  },","  methods: {","    showPopup() {","      this.show = true;","    },","    onClose() {","      this.setData({ show: false });","    },","    getImg() {","      ImagePreview([this.resultImg]);","    },","    getImg1() {","      ImagePreview([this.makePic]);","    },","    getImg2(item) {","      ImagePreview([item]);","    },","    img_index(item) {","      this.bgPic = item;","    },","    handleReset() {","      this.$refs.esign.reset();","    },","    handleGenerate() {","      this.$refs.esign","        .generate()","        .then((res) => {","          debugger;","          this.resultImg = res;","          console.log(res);","        })","        .catch((err) => {","          alert(err); // 画布没有签字时会执行这里 'Not Signned'","        });","    },","    drawProdPicture() {",'      if (this.resultImg == "")','        return this.$toast("先在画板画出签名，接着点生成");','      if (this.bgPic == "") return this.$toast("先选择图框");',"      debugger;","      let img1 = new Image();","      img1.src = this.bgPic;","      img1.width = 1496;","      img1.height = 866;",'      img1.setAttribute("crossOrigin", "anonymous");','      let canvas = document.createElement("canvas");','      let context = canvas.getContext("2d");',"      canvas.width = 1500;","      canvas.height = 866;","      let img2 = new Image();","      let flag = true;","      // 将 img1 加入画布","      img1.onload = () => {","        context.drawImage(img1, 0, 0, 1495, 866);","        img2.src = this.resultImg;",'        img2.setAttribute("crossOrigin", "anonymous");',"        img2.width = 60;","        img2.height = 30;","        if (flag) {","          flag = false;","        } else {","          let src = canvas.toDataURL();","          this.makePic = src;","        }","      };","      // 将 img2 加入画布","      img2.onload = () => {","        context.drawImage(img2, 1000, 566, 160, 136);","        if (flag) {","          flag = false;","        } else {",'          let src = canvas.toDataURL("image/png");',"          this.makePic = src;","        }","      };","    },","  },","};","</ script>",'<style lang="scss">',"#p2 {","  .p2_top{","    margin-bottom: 1.6rem;","    p{","      font-size: .426667rem;","      margin-bottom: 5px;","    }","  }","  img {","    width: 50vw;","  }","  .p2_esign {","    border: 2px dotted red;","  }","  button {","    padding: 5px;","    margin: 5px;","    border: 1px solid blue;","  }","  .p2_img {","    display: flex;","    overflow: auto;","    img {","      display: block;","      font-size: 0px;","    }","    & > div {","      margin: 5px;","    }","    & > div:hover {","      border: 1px solid yellowgreen;","    }","  }","  .bottom {","    position: fixed;","    bottom: 0;","    padding: .533333rem;","    background: beige;","    width: 100vw;","    text-indent: .533333rem;","  }","  .text_bottom{","    margin-left: 8vw;","    margin-top: .8rem;","    margin-bottom: .533333rem;","    &>li{","      font-size: .426667rem;","      line-height: .906667rem;","      font-weight: bold;","      &>ol{","      font-size: .373333rem;","      color: #837a7a;","      line-height: .426667rem;","      -webkit-touch-callout: text;","      /*系统默认菜单被禁用*/","      -webkit-user-select: text;","      /*webkit浏览器*/","      -khtml-user-select: text;","      /*早期浏览器*/","      -moz-user-select: text;","      /*火狐*/","      -ms-user-select: text;","      /*IE10*/","      user-select: text;","    }","    }","    img{","      width: 84vw;","    }","    ","  }","}",".van-image-preview__image {","  background: white;","}","</style>"]}},methods:{showPopup(){this.show=!0},onClose(){this.setData({show:!1})},getImg(){Object(c["a"])([this.resultImg])},getImg1(){Object(c["a"])([this.makePic])},getImg2(e){Object(c["a"])([e])},img_index(e){this.bgPic=e},handleReset(){this.$refs.esign.reset()},handleGenerate(){this.$refs.esign.generate().then(e=>{this.resultImg=e,console.log(e)}).catch(e=>{alert(e)})},drawProdPicture(){if(""==this.resultImg)return this.$toast("先在画板画出签名，接着点生成");if(""==this.bgPic)return this.$toast("先选择图框");let e=new Image;e.src=this.bgPic,e.width=1496,e.height=866,e.setAttribute("crossOrigin","anonymous");let t=document.createElement("canvas"),i=t.getContext("2d");t.width=1500,t.height=866;let s=new Image,o=!0;e.onload=()=>{if(i.drawImage(e,0,0,1495,866),s.src=this.resultImg,s.setAttribute("crossOrigin","anonymous"),s.width=60,s.height=30,o)o=!1;else{let e=t.toDataURL();this.makePic=e}},s.onload=()=>{if(i.drawImage(s,1e3,566,160,136),o)o=!1;else{let e=t.toDataURL("image/png");this.makePic=e}}}}},u=d,h=(i("e495"),i("2877")),p=Object(h["a"])(u,s,o,!1,null,null,null);t["default"]=p.exports},ae74:function(e,t,i){e.exports=i.p+"img/fk.png"},d9d7:function(e,t,i){e.exports=i.p+"img/bk.png"},e495:function(e,t,i){"use strict";var s=i("f043"),o=i.n(s);o.a},f043:function(e,t,i){}}]);